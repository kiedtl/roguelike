Mob speech
----------
- On spotting an enemy
  - "Aha!"
  - "It's a <species>!"
  - "It's <name>!"
- On spotting the player
  - "It's Obmirnul!"
  - "ALARM!"
  - "It's the @!!"
- On fleeing
  - "He's coming!"
  - "I'm dying!"
  - "Heeelp!"
- On being cornered
  - "Please no!"
  - "Mercy!"
  - "Don't touch me!"
  - "Go away!"
  - "No farther!"
  - "Away!"
  - "Leave!"
- On seeing a dead ally, killed by a visible hostile
  - "Murderer!"
  - "Screw you!"
  - "Killer!"
  - "Code red!"
- On seeing a dead ally, killed by a nonvisible hostile
  - "Oh no!"
  - "Noo! Not <name>!"
- On pursuing a fleeing hostile
  - If nearby allies:
    - "Hunt it down!"
    - "No mercy!"
    - "Kill!"
  - "Mendicant!"
  - "Coward!"
  - "Wimp!"
  - "Clown!"
  - "Heh, you can't outrun me!" if faster
  - "You can run but you can't hide!" if slower
- On killing hostile
  - "Victory!"
  - "Phew!" if at low health
  - "The <name> is dead!"
  - "The @ is dead!" if hostile is player
  - "Hurray!"
- On taunting a hostile
  - "Mendicant!"
  - "Coward!"
- On pursuing an unseen hostile
  - "Coward!"
  - "Show yourself!"
  - "Where are you?!"
  - "Where is he?"
- On investigating a noise ("...?", "What?")
  - "What?"
  - "...?"
- On completing investigation of a noise
  - "Must've been rats!"
- On finding an pursued enemy
  - "Fool!"
  - "It's here!"
  - "Gotcha!"
- On cornering an enemy
  - "I've got you now!"
  - "Now you're mine!"
- When player is at critical HP
  - "Time's up, <name>!"
  - "You're finished now!"
  - "Hehe"
  - "You miserable <species>!"
  - "You miserable @!"

New mobs
--------
- enhanced emberling
  - 4 tiles, noisy
  - has Overpowered Engine
    - +200% speed when enemy is far away, but has chance to break down and
      become and immobile
  - firebolt thing, range-limited
  - 25% rFire, -25% rElec, 10% Armor
  - event: it goes insane, assault called
    - "The enh. emberling emits strange sparks."
    - "The alchemists examines the enh. emberling closely."
    - "You hear a terrific CRASH!"
    - "The enh. emberling breaks out of the enclosure!"
    - "You hear an alarm going off!"
  - Can break down a door and an adjacent wall when pursuing enemy.
  - Stationed as guard in workshop/3, lab/2, lab/3.
    - (Workshop one is rare and diluted with broken ones)
- ember beast
  - enh emberling, but doesn't break down
  - no rFire, -50% rElec
  - fiery javelin instead of spurting flame
  - kept in some place where player might bring allies(?), Holding
x sulfur fiend x
  x rElec∞ and rFire+.
  x Hasten Rot: makes a corpse emit a cloud of miasma, destroying the
    corpse in the process. Miasma causes nausea.
  x Summon Ball Lightning: conjures a ball lightning mobs.
x vapour mage
  - Airblast: knockback foe (5 - distance_from_mage) spaces
  - Haste dustling
  - Has night vision.
x convult
  - Keeps distance
  - Enrage dustling
x dustling
  x Exceedingly fragile (5 HP) and no armor/weapons. Carries a strong
    punch, though.
  x Fast (55% speed) and has night vision.
  x Vunerable to fire and electricity.
  x Found solely in Caverns.
x frozen fiend
  - "A winged humanoid, clothed in watery-blue robes. It whispers grimly
     to itself as it patrols the dungeon, inspecting its underlings with
     an expression of cold contempt.
  x Polar resurrection: Raises corpses into stationary foes. Such undead
    are very fast, have good armor, and are quite tanky, but are very
    vunerable to fire.
  x Polar Casing: transforms a wall near the target to ice, damaging all
    (yes, all) adjacent monsters. Reverts back to a wall in 5-6 turns.
    - "The freezing fiend stares at you."

- hornblende statue
  - Appears in pairs in hallways of the Crypt.
  - Chance to resistibly blink intruders to itself.
- pitchblende statue
  - Appears in pairs in hallways of the Crypt.
  - Chance to resistibly blink intruders away from itself.
- schalenblende statue
  - Appears in pairs guarding doorways of rooms in the Crypt.
  - Chance to prevent passage of intruders.

x lightning spire
  - Like dcss' lightning spire. Hurls powerful bolts of electricity.
  - rFire+ rElec+ Armor=30% rFume∞ rPois∞
  - Immobile, only attacks when other hostile present
x torpor spire
  - Like DCSS' torpor snail. Casts Slow on player.
  - rFire+ rElec+ Armor=50% rFume∞ rPois∞
  - Immobile, only attacks when other hostile present
x iron spire
  - hurls iron shards.
  - rFire+ rElec+ Armor=50% rFume∞ rPois∞
  - Immobile, only attacks when other hostile present
x calcite spire
  - Summons a single undead on the level to come to the spire's location.
  - rFire+ rElec+ Armor=10% rFume∞ rPois∞
  - Immobile, only attacks when other hostile are present
~ copper spire
  - Enables copper weapons.

x warden
  - calls for reinforcements by shouting/sounding horn
- wretched stars (TODO: rework this theming, no longer fits w/ lore)
  - "A fiery apparition, wreathed in unapproachable darkness. It has the
    appearance of a wheel with broken spokes, covered within and without
    in glazed eyes."
  - Extremely fast.
  - Mights allies.
  - Emanates opaque gas.
    - Mobs that step in gas will be irresistibly blinked away.
  - When allies are about to die, gives them a status them makes them
    very briefly invunerable and sends them insane.
  - Tries to blink around so as to not be adjacent to allies.
  - Teleports away (or suicides?) when no allies visible.
  - Immune to weapon damage.
x burning brute
  - "A raging winged demon composed primarily of boiling basalt,
    feared even by its peers for its vicious fire attacks."
  x Has rFire∞, but rElec-.
  x Hurls bolts of fire.
  x Burnt offering: Raises a visible corpse, and gives it the .InnerFire
    status. Effects:
    - 50% slower.
    - Every 2-3 turns, flames seep out of mob and ignite nearby tiles.
    - When timer is over, mob explodes, damaging all nearby mobs.
  x Has kicking (x1) and clawing (x1) attack (need species struct for this).
x hunter
  - Travels with a swarm of stalkers (see below).
  - Slower than player.
x stalkers
  - "A small flying creature, its four wings humming ominously as it
    follows you at the behest of its owner. Its copper-colored entrails
    loop disgustingly around its silver torso."
  - A small aluminum drone, with copper wires sticking out. The player
    wouldn't know that of course.
  - Travels with a hunter captain.
  - "Sticks" near to player, keeping hunter aware of player's location.
  - Does not actually attack player, keeps distance of 3 tiles.
  - Completely deaf, won't investigate on its own. Vision of 3 tiles,
    has night vision.
x copper hornet
  - "A tiny buzzing insect, seemingly made of copper. It's trying to sting you!"
  - Very fast, and base evade% of 50.
  - Gives copper damage (i.e., electrocution if in aura of copper spire).
  - 5 HP and no armor at all.
  - Found in the Laboratory.
x iron wasp
  - Like copper hornet, but gives no copper damage.
  - Sting attack that gives poisoning.
  - Very occasionally found in swarms of fellow iron wasps.
x lead turtle
  - Slow enough that dying to one is strictly optional (in theory).
  - rFire∞ rPois∞ rFume∞
  - Hits hard, strength == 50, reach == 2.
  - Huge amount of innate armor. Maybe, 60%?
  - Found in the Laboratory.

x warrior
  - Heavily armored (25%), good stats (90% melee, 15% evade), tanky (13 HP).
x recruit
  - "warrior" monster for lower levels.
  - 10% armor, 70% melee, 10% evade, 8 HP

x bone mage
  - Limited haste undead spell
  - Bone mace, no armor.
x bone rat
  - fast, evasive, and moderately fragile.
  - rPois∞ rFume∞ rFire-

x ember mage
  - Fire attack with weapon
  - Travels with packs of emberlings
  - 50% fire resistance via cloak of silicon
  - Spell: Flammable: (will-checked) make target 25% fire-vulnerable
  - Spell: Call Emberling: create 3-4 emberlings from a corpse
x emberling
  - Fast
  - Attacks that do fire damage
  - Prm burning; leaves trails of fire behind
x brimstone mage
  - Has abilities of ember mage (fire resists, fire weapon, spells)
  - Spell: Brimstone: (will-checked) set player on fire
  - Spell: Haste emberling: what is says on the label
  - Avoids melee.
  - Travels with packs of emberlings

x sparklings
  - Attacks that do electric damage
  - Spell: blinkbolt
x spark mage
  - Can convert corpse to sparklings
  - Can very briefly paralyse player ("stunning burst")
x lightning mage
  - Has all abilities of spark mage
  - Smite-targeted electrical attack; does more damage the farther away the
    target is from the caster
    - Has potential to work well with mage's desire to keep distance
  - Can haste sparklings
  - Keeps distance

x slinking terror
  - creeps near walls, refuses to move while being watched
  - very fast, attacks nearby enemies
  - fearless, tanky
- creeping death
  - A sabre-toothed cat, nothing more or less.
  - Has LOS radius of just one more than player's.
  - Stalks player around.
  - When player is in dark area and is alone, the cat charges and attacks player.
  - While charging:
    - 50% increased speed
    - Bite provides chance of paralysis(?)
  - When player is in LOS of cat, messages:
    - "You feel like something is watching you."
    - "You feel uneasy." (just before cat charges)
  - Is neutral to guards, alone among night creatures.

x spectre mage
  x Spectral Sword: summons four spectral swords, which are very fast but
    have just 1 HP and do little damage. Like Brogue's staff of conjuration.
  x Found in Laboratory and Caverns.
x ancient mage
  - "Even the most powerful of human mages cannot hope to wield the full
    power of the Necromancer. Instead, it is invested in this undead mage,
    an immeasurably ancient skeleton resurrected for this purpose."
  x Summons ball lightning. (TODO: replace with orbs of devastation.)
  x Mass Dismissal: gives .Fear to all attacking monsters in LOS. Resistible.
  x Aura of Dispersal: blinks away all creatures in caster's immediate
    vicinity.
  x Summon Enemy: resistibly teleport enemy/player back into its LOS, if
    it cannot see enemy.
  x Hurls crystal shards.
  x rPois∞ rFume∞ rElec∞
x death mage
  x Bufs nearby undead for a short time.
  x Haste: give .Fast to nearby undead ally.
  x Heal: Uses up a corpse to restore 90% of lost health for nearby undead ally.
  x Prefers to keep distance.
- sleeping beauty
  - "A hideous statue of some nameless creature, covered in metal plates."
  - Sleeps, when hit with electric damage, activates.
  - rElec+75% rFume∞ rFire∞
  - (from notes:) Deploys emberlings
  - (from notes:) Workshop room:
    - Alchemist diary
    - Wheels, steel pipes, welding setup
    - SB frame (what's that?)
x mellaent
  - kerejat-like nuisance
  - noncombatant
x bloat
  - Bloated, very slow (150/200), 18 HP
  - When wounded, bursts forth miasma.
  - Analagous to TGGW's zombie.
  - Can see in the dark.
x sentinel
  - 12 HP. Armored, sword-wielding version of guard
x cinder worm
  - Fire attacks, Prm burning
  - vomit fire: set surroundings of fire
  - Sometimes found as neutral prisoners
x cinder brute
  - Just plain fire attacks, Prm burning
  - Hurls fireballs?
  - Sometimes found as neutral prisoners
  - TODO: think of unique ability
- cuprite fiend
  - Sulfur fiend's electrical attack (TODO: think of replacement for sulfur
    fiend)
x war olg
  - Also known as "troll" to humans. Naturally peaceful grazing herbivores,
    but this one has been trained for war.
  - Three pairs of legs/hands.
  - Fast regeneration (0.5 per turn)


Equipment
---------
(damages is after making all hps 1/4)

weapons:
x quarterstaff      2 damage                OpenMelee, Martial++, +15 Evade
x battleaxe         4 damage   -15 Melee%   OpenMelee
x knife             1 damage                Dip
x dagger            2 damage                Dip, Martial+
x rapier            3 damage   -10 Melee%   Dip, +10 Evade, Riposte
x stiletto          5 damage   -25 Melee%   Dip
x mace              2 damage   +10 Melee%
x great mace        2 damage                Stun
x morningstar       3 damage   +10 Melee%
x knout             6 damage
x club              1 damage
x longsword         2 damage                Dip, +10 Evade
x halberd           2 damage                Reach+, OpenMelee, Dip
x glaive            2 damage   +10 Melee%   Reach+, Dip
x monk's spade      1 damage                Reach+, Knockback(1)
x woldo             3 damage   -10 Melee%   Reach+, Dip, Martial++

body armor:
x robe
- martial robe      0% armor           Martial+
x gambeson         15% armor   Sneak+
~ leather armor    20% armor           Martial-
- hauberk          25% armor   Sneak--
- slvlss hauberk   25% armor   Sneak-- OpenMelee
- cuirass          35% armor   Sneak-  Martial-

footwear:
- won't be added just yet, need more ideas to justify new armor slot
- sabatons:        15% armor
- martial shoe:                Martial++
- combat boots:    10% armor   +10% melee ("perfectly weighted for combat")
- silus boots:                 rFire+
- insulated boots:             rElec+
- golden shoes:                Potential+5
- ornate shoes:                Potential+10 Will-1
~ scale shoes:      5% armor   +10% speed when moving over ground that gives speed, -10% speed
                                on ground that slows down

headgear:
- mining helmet:               Vision+ 
- mail coif:       10% armor
- cloth hood:                           rElec+           Evade+
- fume hood:                   Vision-  rFume+70
- welding helmet:   5% armor   Vision-  rFire+
- spectral crown:                       Conjuration+     (change from Aux)
- thief's mask:                Vision-  infravision
- gold headband:                        Potential+10     rElec-10 Will-1
- gold tiara:                           Potential+20     Will-2
- lightning helm:   5% armor            rElec+
- silus mask:                           rFire+
- silus hood:      10% armor            rFire+
- magalt mask:      5% armor            Will+            [holy] Suicide bomb status (hellfire blast)

- shadow mask:                 Vision-  Will+1           [Night] Will+2
  - wrong theme (Will+ is for holy faction)

utility and auxiliary items:
- Detect undead (or nah... overlaps with Corruption too much)
- Vampirism (charm of transference)
x Buckler (+10% block)
x Spiked buckler (same stats as bucker, but has Retaliation damage)
x Detect electricity
  - Theme: something something "detects magnetic interference" w/ e.g. fancy
    compass, or something along those lines
  - Detects powered machines, sparklings/spark mages, stuff, sulfur fiends,
    lightning spires, etc
x Detect heat
  - Detects 'warm' machines (i.e. braziers and a few others), areas with fire,
    burning monsters + their surroundings, and otherwise .Warm monsters.
x Orb of Wolfram
  - -10% evade (very heavy!), but +25% rElec. (i.e., it routes electric bolts
    through itself instead of through you.)
x Miner's Map (echolocation)
x Dispel Undead
  - Any undead adjacent to you take 2 dmg each turn.
  - Very powerful, but makes it impossible to sneak around them.
- Crystal Ball
  - Small chance to dazzle enemies that can see you if you're running and in
    light. (daze or disorient?)
- ?
  - Cause attacks against large, healthy creatures to do bonus damage.
- ?
  - Item that gives damage bonuses inversely proportional to your health.
- ?
  - Bloodlust, when killing living monsters with non-stab, heals player for
    half the monster's max health.
  - Encourages risky fights, but with lucrative rewards (large amounts of
    healing.)


Rings
-----
x ring of concentration: [holy] Increase willpower by a factor of 2, at the
  cost of melee%, evade%, and slowness.

x ring of condemnation: [holy] instakill undead, at cost of 10 turns held.
  Ancient Mage should have some kind of countermeasure (transform into
  something else? explode into swarm of enemies?)

- ring of fustigation: [holy] undead explode, causing other undead to explode,
  chain reaction
  - Explosion only over cardinals... unless disoriented, then it's only
    diagonals
  - will/2-will damage, damage stacks
  - cannot be used while corrupt and target must be undead, doesn't affect
    non-undead

- ring of deceleration: Adjacent mobs have their attack speeds slowed
  significantly. Three willpower checks are carried out, stopping at first
  failure: 1 succeeded == 150%, 2 succeeded == 300%, 3 succeeded == 400%.

- ring of provocation: (Alvoc) Tear apart a nearby (standing on/adjacent)
  corpse in a crazed animal rage, causing all visible enemies to either flee or
  become enraged (50/50 chance). Target corpse must be "named".

- ring of ____________: (Alvoc) +50 attack speed, -50 move speed

- ring of anticipation: +10% innate melee boost, will-checked chance to grant
  adjacent enemies `anticipated movements` status, giving them -15% evasion
  - Problem: kinda boring, lots of these kinds of bufs already

- ring of distortion: (alt) Bends space around player, granting +20% evade and
  -20% melee.

x ring of obscuration: Grants "invisible" status, drains 1 MP for each enemy
  that can see player in exchange for them not noticing player. No MP drain
  when player can't be seen. 0 MP to start with. (Needs downside. Maybe doesn't
  work if player is directly adjacent, or player is corrupted and target is
  undead?)

- ring of ____________: Grants enemy on conductive terrain "gathering charge"
  status, causing them to take damage each turn they stand on that terrain
  (status is cured when they walk off)

- ring of demolition: Explosion centered on player, player takes no damage.
  (Needs some downside/quirk to make it interesting. Only works if completely
  surrounded (by either allies or enemies? hmm, could be useful for summoners)?
  Damage is low, but gives player bad/good effect for each enemy injured?)

- ring of ____________: Gives "sanctuary" + disorient status effects. Sanctuary
  status damages and .Held's(10) any mob adjacent (cardinals only), and doesn't
  affect mobs with .Held. Creates puzzle-like gameplay. Damage could scale with
  some stat.

- ring of infestation: Gives infestation status (mob-only), "night beatles"
  burst out of affected mob when status effect ends. Night beatles should only
  be dangerous in larger numbers (maybe steal ghoul respawn mechanic from SPD?)
  - Potion of infestation + infestation gas: infestation status to
    paralyzed/will==0/in-dark-area mobs (still haven't decided, maybe a
    combination of the two

x ring of transformation: turns all fire into electricity. "Heals" the burning
  status, and targets self.

x ring of detonation: make enemy explosive+noisy+insane+immobile

x ring of deception: [anti-Holy] undead mistake you for ally unless non-undead
  allies are nearby

- ring of deconstruction: rolling boulder

- ring of conscription: raise the corpse the player stands on at the end of the
  pattern to fight, giving it impressive tankiness and stat boosts (but
  slowness?).

x ring of magnetization: cause knockback of all nearby foes onto a single foe.
  Like Gell's Gravitas in DCSS. Knockbacked foes could possibly hit player, so
  player must plan accordingly.
  - Attack foe and move behind it.

x ring of insurrection: raise 3-7 nearby corpses to fight a specific mob, for
  14-28 turns. Zombies are completely blind and won't fight any other monster
  unless attacked.

x ring of electrification: Electrocute all mobs on one side.
  - Attack mob, move one tile backwards into corridor (ie with walls on the
    other two sides of your character), wait, attack forwards

x ring of teleportation: Zap an enemy, then teleport to where the zap ended
  (i.e. Blinkbolt spell).

x ring of damnation: create a fire explosion on all tiles containing foes.
  - Move towards a wall, wait, attack in the opposite direction.

x ring of electrocution: Electrocute tiles in four corners next to player.
  - Attack in a cardinal direction, move in opposite direction, move
    perpendicular, attack again

x ring of cremation: Makes all adjacent foes temporarily vulnerable to fire,
  and creates ring of flames in all adjacent squares.
  - Move all around mob in four turns (w/o attacking or resting).

x ring of extermination: fire bolt of fire in direction.
  - Move forward against guard, move right/left, move forward

- ring of ignition: Summon orbs of lava (a la DCSS' Foxfire).
  - Move in zig-zag direction away from mob.

Other ideas:
  - Passively allows player to know if they're still being pursued.
  - Allows player to see spots near pursuers (but not the pursuers
    themselves?) for ~3-5 turns.
    - Movement pattern:
  - Can destroy a wall tile, sending shards of lethally sharp stone
    hurtling towards adjacent mobs. Harder stones == more damage.
    .Deafening noise.
  - Vampirism idea: vampiric ring of draining
    - Drains an enemy for {speed,health,HP}.
    - Allows player to see that mob and all tiles within two spaces.
    - Player will get a status (paralyzed? slowed? negative regen? traumatize? stun?)
      for a bit when the enemy dies OR the enemy sees the player.
    - The drained mob immedietely becomes an enemy to everyone.
    - If the enemy dies, the player is teleported there in its place?
    - Movement pattern: ???
  - Causes dark gas to emanate from player. Gas is opaque and blocks all light.
  - Causes all nearby machines to lose power for a bit (aka turn out the lights).
  - Dismissal: forces all investigating mobs in LOS to return to working.
    If resisted by willpower, will reveal player's location to them.

Books
-----
maps
  - maps of just mob stations
  - maps of just presence of walls/floors
  - maps of special item locations (rings/potions)
  - maps of machine locations (recharging stations/drains)
  - maps of possible stair locations
manuals
  - extremely rare, found in golden rooms
  - provides boost to a stat the player may or may not be able to take
    advantage of, depending on build type.
  - stats: missile%, evade%, martial combo, sneak, missile%
  - idea: ability to attack more quickly (decreased weapon delay)
  - idea: mp * 1.5, mp * 2, mp * 2.5
  - idea: permanent riposte effect
  - idea: open melee effect (book teaches you melee methods that only work in the open)
  - idea: closed melee effect (book teaches how to fight effectively in corridors)
  - idea: book of torment -> 25% bloodlust


Threat countermeasures
----------------------
General:
x Patrols looking around                                  60
x Patrols looking around even more                       180

Specific:
- Sentry spires placed in important rooms(s)              80
- Reinforcements dispatched, tracking player normally    200, 300, 400, ...
x Hunter squad sent out (escorted if deadly)             400, 500, 600, ...

Unknown:
x Watcher dispatched to rooms                            100, 300, 500
- Floor-wide sweep                                       400

Unknown/Specific (deadly):
x Iron/lightning spires placed in important room(s)       80
- Using checkpoints more often                           160
- Reinforcement squads sent to rooms                     200, 300, 400, ...
- Extra member for each patrol                           200, 300

Misc:
x Unknown threats should only rise for 30 turns in a row (before guards assume
  whatever it was moved along)
  x UNLESS incident_count > 10, then it continues rising indefinitely


Animations
==========
- Event animations:
  x Basic combat animations
  x Throwing items
  x lightning bolt, blinkbolt
  x Bolts of fire
  x Knockback
  x Fire explosion
  x Electricity explosion
  x Normal explosion
  x Hostile noticing you
  x Picking up items
  x Looting chests
- Persistent animations:
  - Dormant/sleeping monsters (blinking 'Z')
  - Shimmering golden/obsidian/cuprite/rust doors/walls
  - Lava and water
  - Noisemaking monsters (blinking music sigil)
  - Fleeing monsters (blinking '!')

Lighting/FOV:
=============
x Allow for prefabs to "seed" a map
  (Needed to ensure that power stations can appear on map)
x Refactor/cleanup FOV helper methods:
  x Generalize raycasting function
  x Add quadrants to raycasting
  x Use raycasting for everyone, remove shadowcasting
  x Use matrix to store mob's FOV, instead of array.
  x Update memoized sin/cos values
x Ensure that raycasting method doesn't have any artifacts
x Set a filter on area outside FOV (sepia? grayscale?)
x Show vision "energies" on FOV
x Make lighting system affect stealth/FOV
~ Make raycasting use bounding box instead of slower trigonometry method?

Room features/Mapgen:
=====================
- Allow close prefabs
- Make connectors flanked by floors a floor or door
- Terrain system
  - Lichen:
    x fluorescent fungi
    x dead, flammable fungi
    x tall fungi (very reduced LOS)
    x camoflaging fungi (Camo++)
    - brambles (retaliation; dmg on movement; 150% slowness)
    - XXX fungi (haste undead)
    - XXX fungi (slow living)
    - XXX fungi (ctx corrupt effect)
  - Floor materials:
    x metal (rElec-)
    x copper (elec dmg propagation)
    x wood (rFire- rElec+)
    x carpet (Noise-)
    x gravel (Noise+)
    x shallow water (Noise+ rFire++ rElec--)
    - (v1.x.0) ashes/gypsum (cloud of dust on movement)
  - Other:
    x platform (less evade%, more melee% and missile%, vision++)
    x pillar (+25 evade%)
x Add statues and chests to corners of rooms
x Add posters
~ Allow for prefabs to be rotated
x Allow for prefabs to have alternate layouts
x Allow for prefabs to be restricted to a map
x Create corridors between parallel prefabs/rooms
x Make the "lamps" electric "braziers"
  ~ Place them in center of rooms.
  x Place them in corners of rooms.
  x Make them explosive and electrocutive!
* Useless items in bins, cabinets, etc
  - dice, deck of cards
x Weapons and armor in cabinets
- Allow multiple subrooms in rooms (BSP?)
- Cave-like boundaries around edges of map in CAV
x Different types of power generators for different maps:
    x VLT:  coal furnace
    x PRI:  normal power plant
    x CAV:  turbines (geothermal)
    x LAB:  nuclear power plant
x Prisoners chained up to the wall in PRI
- Living Dungeon: useless items in various locations
  - Lab offices: potted mushrooms, artwork
  - Lab + Workshop corridors: named (ordinary) statues

Morgue files
============
- Show annotated game notes (a la DCSS/Boohu).
- Count the number of times the player "got lucky" (i.e., was at critical HP
  but didn't take a hit).
- Show total (IRL) time duration of game.
- Show player's title.
- Show number of steps player was from stairs when they died.
- Record % of aggravated/spooked enemies on each floor.
- Record other interacted machines (fountains, capacitor arrays, etc)
- Record % of explored open space/explored rooms on each floor.
- Record equipment state and HP when leaving each floor.
- Replace augment/aptitude list in front of scoresheet with stat recording when
  it was granted to player. (Consistency + less spaghetti info collection code)

Mobs, AI
========
x Make watchers shout loudly
x Allow mobs to shuffle past each other in corridors
x Ensure that laborers don't leave to investigate noises
x Ensure that the EnemyRecord counter is only decremented if the pursuer can
  see the last spot where the hostile was seen
x Make watchers smack intruders when they can't run
x Fleeing mobs and mobs that have just spotted an enemy "tell" nearby allies
  about the hostile
x Define what undead are somewhere (combat bonuses, stat increases, miasma
  emissions, etc)
~ Make cleaners/engineers remove nets shot out by sentinels
x Revamp squad AI.
x Add morale system for each mob, affected by:
  x Loss of leader (squad)
  x Battlecry of leader (squad)
  x Presence of stronger allies
  x Presence of stronger enemies
  x Presence of many enemies
  x Pain,Fear effects
  x Miasma gas, other gases
  x Buffs on self or allies (haste, might, etc)
- Enemies that surrender or start whimpering when fleeing and trapped in a
  corner, or maybe prepare for one final all-out assault
  - Dialog
  x Would provide excuse for .Enraged status implementation.
- Enemies that suicide when cornered and about to die.
x Patrols report areas that need cleaning
- Living dungeon: haulers occasionally bring prisoners food/alcohol rations
- Living dungeon: cleaners occasionally go over prison cell
- Living dungeon: guards drag new prisoners to replace ones which died
  - Occasionally: mapgen schedules prisoner to be placed instead of placing one
- Living dungeon: executioners periodically demolish a prisoner (new dialog!)
- Living dungeon: dead coroners ensure next coroner is escorted
- Living dungeon: spires leave tangled metal behind instead of no corpse
  - Engineers/haulers fix/replace dead spires

User Interface
==============
x Add padding between infopane/msgpane and map
x Make it easier to tell the heavily wounded from dead
x Fix showing of display percentage of last damage
x UI for status effects (paralysis, etc)
x Show red/yellow/orange for low health bars
~ Use proper CP407 arrows for staircases
x Show prisoner's activity as "prisoner" instead of {"investigate","attack"}, etc
x Make bg of cell with noise green
x @ command to see player's full AC and stats
x Show information characters next to mob in enemy pane
  x *:   red: low HP, white: HP
  x n:   neutral
  x p:   prisoner/chained
  x u:   rFume∞
  x i:   immobile
  x f:   faster than player
  x s:   slower than player
  x ?:   investigating noise
  x !:   fleeing
  x @:   grey (unaware), red (seen), pink (remembers), blue (fleeing), white
  x Z:   sleeping/dormand
  - >:   drained attribute
  - <:   increased attribute
  - D:   unhearing (deaf or not curious)
  - <M>: making noise
  - ~:   off balance (ie won't act again before player's next turn)

Items/Machines
==============
x Add cloaks:
  x cloak of silicon (fire resistance)
  x cloak of fur     (electricty resistance)
  ~ cloak of velvet
    - 30% chance for hostile to not notice mob, even when mob is in hostile's FOV
    - Slightly increases dexterity
  x cloak of thorns
    - 40% chance for a missed melee attack to backfire on attacker, dealing
      moderate damage.
- Add evocables:
  x "eldritch lantern": dazes or blinds mobs in FOV; blinds player
    for 2 turns. 4 charges.
  x "symbol of torment"
  ~ "fume hood" (CAV): Grants rFume∞ for ~10 turns. 4 charges.
  ~ "hammer": Destroys a machine. ∞ charges; cannot be recharged.
  x "iron spike": Jams a door. 1 charge; cannot be recharged.
  x "mine kit": Creates mine on tile. 2 charges; cannot be recharged.
  x "tinderbox": Ignites a single tile. Like Conjure Flame in DCSS. 6 charges.
  x "sparkthrower": Shoots a narrow beam of flames at a target. 6 charges.
- Add machines:
  x "capacitor array": kills all mobs without rElec in FOV. Deafening noise.
  x recharging stations: 4 charges. 1-2 per level.
    ~ 'r' key is shortcut to evoke recharging station, when such a station is
      in LOS. Doing so invokes it for everything in inventory.
  x fountain: Can be evoked to heal player by half of lost health. 2 charges.

Fires/explosions
================
x Make monsters flee sooner if burning?
- Make steam a fire retardant?

Message pane
============
- Messages:
  x On using ring
  - On mob refusing to swap with player
  - On enemy turning to flee
  x On recieving a status (Confuse, Daze, etc)
  x On seeing a mob cast a spell
  x On dodging by enemy or player
  x On death
  x On resisting a spell
  x On swapping weapon
  x On making a noise, or mob making a noise
x Messages that require confirm/keypress
x Only print trap messages when culprit is player
x Group identical messages in msgpane
x Attack messages should be nice and descriptive ("You skewer the goblin!")
  x Even more descriptive! ("The troll smashes you like an overripe mango!!")
~ Put some messages on same line as previous.
x Unify messages when using ring abilities
x Append "*Stab*" to attack messages as appropriate

Fixes
=====
x Add walls to edges of map after mapgen
x Place stairs only in rooms
x Fix sound propagation
- Reject maps without enough open space
~ Give player credit for deaths caused by malfunctioning machines
- Give player credit for deaths caused by fires
x Show appropriate number of exclamation points on messages about spell damage
x Don't allow confused monsters to attack diagonally.
- Fix bugged liquids with regards to thrown trajectories (fix w/ liquid rework)

Ideas
=====
[+] planned, [~] obsolete, [x] done
~ Layers, as in Brogue? (gas, liquid, surface, floor, etc.)
x Cloaks of invisibility, confusion, blinding, camouflage, electricity
  resistance, fire resistance, etc.
  - cloak of shimmering: chance of daze mob that spots player?
~ Ring of seeing (magic mapping)
~ Rings have negative effects (decreased piety/willpower)
  - obsolete: rings are expected to be worn at all times, not an item that can
    be swapped off or on depending on situation
~ Add bonus (or neg bonus) to attacker if defender moved or didn't move in the
  past two turns
  - obsolete: this game isn't cogmind. besides, too many obscure combat bonuses
    is bad.
~ Ring of intimidation that magic maps dungeon based on mob's memory
  - obsolete: mobs don't have memory. also, how would the UI tell what was mapped
    from another mob's memory vs what the player visited (maybe take a cue from
    cogmind and show such portions in greenscale/grayscale/bluescale?)
~ Crafting grid/alchemy by arranging items on map and dancing
  - obsolete: too complex
x Lighting system and torches
~ Light colors
  - obsolete: would complicate ui too much. "Is that floor color change from a
    light color, gas, or something else?"
x Ring of echolocation to magic-map neighbors of sound-producing tiles
- "Night", when guards sleep, torches go out, and night creatures awaken
- "Ghost database" that stores bones for players who died during game, then
  shows ingame bones/corpses/undead on other games
x Candles that destory people/objects/rooms when quenched
- "Permeability" instead of walkability, that lets creatures pass if they are
  small enough (e.g., rats and small spiders could pass through iron bars)
~ Tile "integrity" that reduces when tile is hit with explosion
  - obsolete: too complex
~ Radioactivity system: nuclear reactors, uranium, corium, nuclear bombs that
  the player can blow up for fun
  - obsolete: too complex, and wouldn't fit lore well
~ Orchestra/Concert, that sings/players instruments and distracts guards
  - obsolete: making all the guards move to one corner of the map suddenly is
    obviously going to make things easier for player /s
~ Night creatures should pop out of artwork at night
- Stone guardians that patrol map and cast confusion at enemies, but move at 1
  tile per 10-20 turns
~ Headstones with previous player's comments on them, or ghosts that mourn
  previous player's carelessnes (think DCSS ghosts)
  ~ Bonus: the ghosts/gravestones are found in the temple in prison cells
~ Pub for guards to get drunk
  - obsolete: how would this affect gameplay? (maybe just a vault would be fine?)
x Ring/item to detect powered machines
- Ring/feature to detect what kind of mob made a noise
- Radioactive gas leaking from a warehouse on a few levels, so a kind of food
  clock
~ Ability to rifle sleeping/drunk/stunned guards as well as corpses
x Undead have other interesting kinds of negative effects when they score a
  hit?
  - Reduced max HP, less regen rate, reduced stealth
  - Done: corruption mechanic
~ Areas that speed up or slow down mobs
- Lichen/fungi that puts mobs to sleep (enchanted ground)
- Ice/oily floor that randomizes movement
- Sticky ground that reduces evasion
x Mobile traps that can be placed by player and used to lure guards on top
  x {Bombs/landmines, bear trap, damage trap} "kits"
x Item/lever player can trigger to unlock locked doors in room, releasing
  prisoners and creating maximum chaos.
~ Use Dijkstra for lighting/FOV?
~ Potion and Ring ID system.
  - obsolete: too complex
x Blood spattering?
x Speech bubbles in following situations: (removed)
- Smell mechanics that allow, say, hellhounds and snakes to detect intruders
  even if they can't see them.
x Ranged melee weapons, e.g., spear and whips
x Add braziers that are built into the walls (aka torches), and use that
  instead for corridors
x Some kind of squad-forming fast-moving swarming mob, like killer bees (DCSS)
  or swarmers (Cogmind 7DRL)
  - done: bone rats
- "cameras kits" that create surface items that keep the surrounding area in the
  FOV of all mobs that have a certain ring on
~ Experiment with "bouncing" rays in raycasting routines
~ Ring/item that has leaving a vunerable "copy" of yourself where that item/ring
  was activated (that is, *two* tiles have the .mob field pointing to the player,
  while the player.coord field points to only one of them).
  - obsolete: could lead to subtle bugs
- weapon runes:
  x interleaving: Swap on hit
  - banishing:    Teleports away
x MP-like system that limits how often spellcasters can cast spells (providing
  a way to tweak dangerous-ness) and how often player can use ring effects.
x Extremely dangerous (but lucrative) vaults that have golden walls, warning
  player of danger.
- Nice floor tile patterns, like Ultima Ratio Regum.
  E.g.:      #############    #############    #############
             #·,·,·,·,·,·#    #·,·,·,·,·,·#    #▲▼▲▼▲▼▲▼▲▼▲#
             #`.`.`.`.`.`#    #—.—.—.—.—.—#    #▼▲▼▲▼▲▼▲▼▲▼#
             #,`,`,`,`,`,#    #—,—,—,—,—,—#    #▲▼▲▼▲▼▲▼▲▼▲#
             #·,·,·,·,·,·#    #—.—.—.—.—.—#    #▼▲▼▲▼▲▼▲▼▲▼#
             #`.`.`.`.`.`#    #·,·,·,·,·,·#    #▲▼▲▼▲▼▲▼▲▼▲#
             #############    #############    #############
- Bribing: bribe lone monsters to stay quiet, but they'll turn hostile again if
  an unbribed comrade shows up
  - Gold + jewelry collection
  - Bri(b)ing key to bribe lone monsters
- "Doormat" poster that has welcoming messages on it, right next to stairs
  - Maybe describes level's challenges for new players?
x Put actual loot in chests + plus new TGGW-like interace for containers
- Monster: has strong ranged attack with copper weapon, and tries to lure you
  into copper ground
- Monster: spell that grants .Explosive status to nearby ally (while keeping
  distance)
- Monster: remotely hurl a single ally at player. Both projectile and player
  take some damage. Eventually, player is completely surrounded.
- Monster: shoots blinding gas at player from a distance
- Sometimes monsters leave useless limbs behind instead of a corpse
- Spell/item: makes nearby enemies forget about you faster
  - Downside: if it fails, makes them remember you longer.
  - Inspired by Cogmind's ECM suite
- Spell/item: flingable lava orb! (ie: fiery orb-of-destruction, normally used
  by lava flans)
- Spell/pattern/item: Give +X% block bonus on every Xth turn. (inspiration: StS
  captain's wheel relic)
- Spell/pattern/item: Give +X% hit bonus on every Xth turn. (inspiration: StS
  captain's wheel relic)
- Spell/pattern/item: Deal 3 damage to all visible enemies (or only undead?)
  after X turns (or every X turn?) (inspiration: StS stone calender relic)
- Canceled evocables/machines that need reworking:
  - summon stone: Summons a random (1-3) number of guards on the level to come
    to the command stone's location. 1 charge.
  - transporter stone: "Signals" a nearby spire to come nearby. Reprograms spire
    additionally.
  - "cannons" (LAB): fires projectile in direction, eviscerating any mobs.
    Loud sound. 6 charges, pwr-station powered.
  - "floodgates" (PRI): creates permanent pool of shallow water.
    1 charge, pwr-station powered.
  - "canister of sludge" (CAV): can be "broken open" to release torrent of toxic
    sludge in direction, creating pool and damaging mobs. Takes 2 turns to empty.
    1 charge.
  - "canister of fuel" (VLT): can be "broken open" to release torrent of burning
    fuel in direction, incinerating mobs and creating pool/cloud of fire. Takes 4
    turns to completely empty. 1 charge.
  - "blinding torch": Basically a laser. Can be evoked on a monster that can
    currently see the player (or *could* see the player, if its LOS was long
    enough), and will blind and daze that monster. 4 charges.
  - room reader (TODO: name) (LAB): Can be evoked on an opaque tile that's
    adjacent to the player, such as a door, and it will show player what's
    behind it as if player was standing there. 6 charges.
    - Inspired by that article demonstrating ability to roughly determine
      what's in a room by shining a laser through a keyhole and analysing how
      the light beams bounced around inside.
  - camera reader (TODO: name)
    - Can "hack" pre-placed cameras to spy on nearby areas for X turns?
  - "cannon kit" (CAV): creates permanent cannon on use (see below). 1 charge.
  - "lightning rod" (LAB): severely damages all mobs without rElec in FOV.
    - Note: implement electricity damage propagation for this.
- Headaches
  - Prevent usage of all (or nearly all) evocables/rings (inability to focus).
  - Cure: potion of ibuprofenication (10% chance of "heartburn" aka 1-2 dmg)
  - Possible source: monster that shoots beams of migraine-inducing energy
  - Possible source: aura of microwave radiation (havana sickness? hah)


Optimizations
=============
- Use @mulAdd where possible (FOV, A*, Dijkstra, light/atmosphere/sound systems)
- Use @setCold(true) where possible (see above for places to look)
- Use SIMD where possible
x Use a matrix to mark nodes as closed (instead of a heap-allocated list) for
  Dijkstra.
x Use Manhattan distance for A* algorithm (overestimating heuristic might be better?)
- Allow functions that repeatedly call A* for the same mob to store an "AstarContext"
  structure that allows astar.path() to reuse cell cost, walkablility, etc data
  without calling those functions again.
- Use atan to calculate octant in which coord appears relative to mob's coord, instead
  of the slower method seen in Coord.closestDirectionTo()

Code cleanups
=============
x Defined unimplemented(), todo(), and oom()
x Stop using the `catch unreachable` syntax:
    libera#zig 19:58 <ikskuh> "catch unreachable" will happily continue to execute code
                              after the error in non-safe build modes
- Remove all floats from color functions, sound systems, gas systems, etc.
x Review usage of usize and change to u64/u32 where needed to prevent portability issues
- Define custom assert() that can give additional context
- Define Lua API and move the following to Lua data files:
  - levelFeature definitions (see mapgen.zig)
  - levelConfig (see mapgen.zig)
- Cleanup/factorize container/item manipulation code for Machine AI.

Refactorings
============
x Define Species struct and carry immutable data for each mob in it
x Convert enum+union pair to union(enum) (see std/fifo.zig) where needed
x Research Manhattan distance vs Euclidian distance vs Moore neighborhood:
  https://reddit.com/r/roguelikedev/comments/nev1jg/a_pathfinding_unstablenondeterministic/
x Add power component to machines
x Use Chebyshev instead of Manhattan distance
- Use arrays and indexes for state.* instead of linked lists and pointers
- Use linked list for roomslist, and use raw pointers instead of indexes
  whenever needed in mapgen code.
x Keep track of each connected room in mapgen, so that no room connects to the
  same room twice.

Tests
=====
x Ensure that distance() treats diagonal moves as more expensive than cardinal moves, or
  the opposite if Chebyshev is used later.
- Full tests for all Coord.* methods
- Full tests for all Rect.* methods
- Full tests for all Direction.* methods

Roadmap
=======
x Basic prefabs
x Allow for definition of a 'start' prefab
x Allow for placement of player in a location
x Allow for placement of specific item in a location
x Add exit staircase that exits game
x Add screen/confirmation for winning
x Add screen/confirmation for death
x Add potion struct, define some potions
x Throw some potions around during mapgen
x Allow picking up of potions
x Add dialog to view inventory
x Add dialog to use item in inventory (quaff potions)
x Add dialog to throw potion at mob
x Define armor struct, use on mobs and player
x Define melee weapon struct and dagger/spear, use on mobs and player
x Add the Openworld
x Allow stacking in inventory
x Add ranged weaponry
x Alternative weapons, weapon swapping
x Revamp sound system
x Fix message-displaying bugs
x Add basic power supply to vaults
x Create misc evocable items
x Create eldritch lantern evocable
x Create warning horn for Warden
x Create Warden, add to vaults, adjust mob ratio there
x Make executioner slower to move around
x Add treatures to Vaults
  x Create gold item/prop
  x Add armour and weapons (only ones that are useless to player)
x Add ability to present confirm/dialog boxes
* Add confirm boxes when:
  - Going to move into hostile's FOV
  x Going to move into a trap or stairs
  - Going to start running
x Show messages the normal way (i.e., top-to-bottom)
x Add morgue-file generation
x Show morgue to player on death/win
x Implement basic explosions (with wizard functionality)
x Add potion of decimation
x Add bomb-making evocables
x Rework and implement some items stuff
  x Increase size of inventory
  x Redo weapons/armor for player
    x robe, gambeson armor, leather armor, chain mail, scale mail
    x knife, dagger, stiletto, rapier, estoc(?)
  x Introduce speed/dexterity penalties for armor
  x Remove swords, replace with maces
  x Place evocables, potions, weapons, armor around dungeon
  x Place item "stockpiles" in PRI and VLT; remove some PRI subrooms to make place for it
  x Add messages when player finds evocable, recharging station, potion, or stairs
x Add recharging stations (and ensure they can't recharge mine kits!)
x Revamp confuse; add "daze" status
  x Fix: add mob to enemy list when they stab, and 90% chance to daze enemy (unless undead)
x Modify player starting environment
  x Starting messages ("You have just escaped...", "Probably pick up those item...")
  x Add some potions for player to use in starting area + weapon + armor
x Add malfunctioning machines
  x explosivity, electrocutivity
  x hammer evocable, player breaking machines
  x iron spike evocable, jamming doors
  x Engineers that repair machines/walls
x Implement cloaks
  x Add resistances
  x cloak of fur, silicon, velvet, thorns
  x Give engineers a cloak of fur
x Add fire system
  x potions of incineration
x Stair overhaul
  x Move stairs into walls, give different Brogue-like look
  x Organize branches and their levels; add stairs to them
  x Place stairs as far away from other stairs as possible
  x Add stair guardians to prevent stair-fleeing
  x Remove regeneration for monsters and players
    x Remove healing from ¡preservation; give ¡recuperation rMlee-
  x Nerf poison and pain damage
    x Merge poison and deceleration
  x Fountains to drink from
  x Apply "upgrade" and healing to player on ascension
x Add tougher monsters; balancing
  x Make fleeing monsters tell allies of foe
  x Flee effects (speed, enraged, shoving)
  x Necromancers, burning brutes, frozen fiends, sulfur fiends
  x Javelineers
  x Add `Flanked` effect + UI element
  x Add mana system
  x Ancient mages, death mages and skeletal warrior squads
  x Place monsters in various areas
x Balancing: fix mob placement (more on dangerous floors, less otherwise)
x Add fungi, plants, terrain
x Add basic (non-ring-based) movement patterns: charge, lunge, counterattack.
x More items, item features
  x Weapon and armor effects
  x Weapon coatings/dipping
x Noise revamp
x LOS/lighting revamp
  x Nerf player's LOS, buf enemies' LOS
  x Change lighting algorithm
  x Remove partial lighting?
  x Show walls as always lit?
x Fix/reimplement item-choosing screen
x Fix/reimplement tile-choosing screen
x Revamp input prompts
x Informational screens
  x eXamine screen
    x Remove 'r' key, revamp recharging station appearance(?)
    x Remove hammer evocable, allow always breaking machines/props
    x Subscreens
      x Player info "@"/"c" screen
      x Poster description screen
  x Inventory screen
    x Remove 't' key, remove 'a' key for items
x Show information characters next to mob in enemy pane
x Condense UI
x Revisit and revamp SMI mapgen, SMI → CAV
x Additional CAV monsters:
  x spectre mages, spectral swords
  x dustlings
  x convults, vapour mages
  x mellaents
x Cleanup machines
  x Message if player moves over activatable machine
x Upgrade to Zig v9
  x Remove usage of usingnamespace
  x Petition khuxkm/ben for update
  x Remove utils.saturating_sub
  x Fix "*mem.Allocator" params
x Ring of Lightning
x Rename VLT back to REC/QRT or something
  x Bedroom prefabs
x Runes and scoring
x Fix morgue file generation
*** v1.0.0 release ***
x Condense UI even more (3 columns for stats, put turncount on level str, etc)
x Show items, notable machines on info pane
x Consumable reworking + kit refactoring
x More evocables: copper ingot, coal, red-hot poker
x More kits and traps: fire, shock, incineration, knockback
x Ring changes/additions/simplifications:
  x Refactor pattern checks
  x More ring types (fire, etc); at least 8
  x Overhaul usage/UI
  x Random ring drops, equipping/deequipping rings
  x Remove ring statuses
  ~ MP costs for rings?
x Fix trtr chambers; add more of them
x Iron, lightning, torpor, and calcite spires
x Bone weapons, corruption effects
x More potions
  x Potion of debilitation, traps of seizure gas
  x Potion of irritation, traps of blinding gas
  x Potion of illumination
  x Potion of intimidation
  x Potion of leavenation
x Add barrel of water
x New monsters
  x War olgs, cinder worms, destroyers
  x Ember, brimstone, spark, lightning mage bands
    x Emberling/sparkling summoning trap kits
  x Warriors, recruits (for treasure vaults)
  x Hunter and stalkers
    x Stalker station
  x Thrashing sculptor
  ~ [canceled] Fiend of vapours
x Copper weapons and copper spires/battery packs, copper hornets
x Treasure vaults
  x Marble vault
  x Iron vault
  x Golden vault
  x Tavern vault
x Fix pushing past monsters
x Remove bad mechanics:
  x remove boring `Flanked' mechanic
  x get rid of broken tiles
    x remove malfunctioning machines
    x locked doors: bump to knock down
  x remove jammed doors, iron spikes
x Level progression overhaul
  x Load level info, stairs from data/levelinfo.tsv
  x Make CAV optional, extra Prison level to compensate (for now)
x Auxiliary items
x Squad overhaul
x UI
  x 'M'essages screen
  x Loading screen and art
  x Features/items screen, remove announcement of items
x WASM support, or at least SDL2 support for Windows
x Write rest of docs/manual
  x Status reference
  x Tutorial
x Playtest game throughout, especially CAV and make adjustments
*** v2.0.0 release ***
x Shrine maps
  x Tunneling mapgen
    x Basic tunneling
    x Rooms
      x Normal rooms
      x Side/"inset" rooms
      x Junctions
    x Remove dead corridors & such
  x Candles
    x Prefabs/encounters
    x Animations
    x Short-term effects
    x Long-term effects
  x Hulkers
    x Pathfinding
    x Melee + fighting
    x Animations
    x Corpses
    x UI: sidebar
    x Gravitate-to-player AI
    x Individuals:
      x Writhing hulks
      x Swollen hulks
      x Thundering hulks
  x Symbol of Torment
    x Effects
    x Description
    x Prefab + mapgen integration
    x Animation
  x First map + specialized content
  x Second map + specialized content
  x Prefab stairs to SIN
  - Revenge squad events in following maps (maybe postpone for later?) (POSTPONED)
x Potion of distraction
  x Effect
  x Description
  - AI modification to revert to investigating on hearing a loud sound
  x Animation
x Animations (w/ particle engine)
  x Paralysing zap
  x Fire bolts
  x Flammabilification
  x Fry
  x Pain AoE effect
  x Regular explosions
  x Fire explosions
  x Walls disintegrating (for Lair map)
  x Electricity blasts
x Night creatures
  x Font: add Cyrillic characters
  x Night creature enclaves
  x Reputation mechanics
  x Doors to enclaves
  x Individual night creatures
    x Spectral totem
    x Slinking terror
    x Night reaper
    x Grue
  x Night Creature features
    x AI: Hunting down treacherous player
    x AI: Periodically visiting another lair
  x Rings
    x ring of conjuration
    x ring of excision
  x Night-creature-themed items
    x Shadow weapons
      x Shadow Mace (Insanity)
      x Shadow Sword (Mass Paralysis)
      x Shadow Maul (Multiplicity)
      x Descriptions for weapons
    x Conjuration stat
    x Spectral Orbs
      x (100) Augment [w]: 1/2 nearby walls disintegrating into single blade
      x ( 50) Augment [F]: rFire +25%/+50%
      x (100) Augment [E]: rElec +25%/+50%
      x ( 50) Augment [u]: When undead dies in LOS, additional volley spawns near it.
      x (100) Augment [m]: Each blade gets 75% melee instead of 50%.
      x ( 50) Augment [v]: Each blade gets 25% evasion instead of 0%.
    x Armor, cloaks, aux items
      x Fuming vest
      x Shadow hauberk, shadow mail, shadow brigandine, shadow shield
      x Ethereal shield
      x Spectral mail, spectral crown, cloak of spectres
x Golden stuff
  x Golden equipment
  x Potion of absorption
  x Mini-shrines
  x Potential stat
  x Draining mobs (dead)
  x Draining mobs (alive)
  x Draining rings
x New rings
  x ring of concentration
  x ring of obscuration
  x ring of condemnation
  x ring of transformation
  x ring of detonation
  x ring of deception
x New potions
  x potion of remediation (cure disorient/nausea/pain) [recipe: recuperate]
  x potion of vision (cure blindness)
  x potion of perception (extra vision, ringing ears) [recipe: vision]
x Fold evocables into consumables
x UI
  x Menu to invoke patterns (via SPACE)
  x Map dynamic popups/annotations
    x Label: aquirement/disaquirement of a status effect
    x Label: new items or dungeon features in view
  x Escape menu
    ~ Status/mob/item description lookup screen
    x Keybinding help "?" screen
    x About screen (or just in log area?)
  x Popups explaining UI elements on hover
    x Quick description for current level indicator
    x Bars (health, corruption, sneak)
    x Stats (resists, other stats near bars)
      x Basic description
      ~ Breakdown
    ~ Status effects
x Corpse-related mechanics
  x Enemies alerted of player if finding recently-killed corpse w/ player nearby
  x Patrols and guards report corpses
  x Cleaners clean area 
  ~ Haulers move corpse to side of room
  x Coroner comes, examines corpse, & registers threat
  x Fix: don't spawn corpses when removing enemies near staircases
x Laboratory/Workshop rework
  x New mapgen
  ~ Enh. sparklings in upper levels
    ~ Dep: capacitors (and possibly Wiring levels)
    ~ Dep: UI labels to effectively communicate when next discharge is
      ~ "discharge 5..." "discharge 4..." "discharge 3...", etc.
  x Emberling garrisons
  ~ Prefab: Flamethrower prop/evocable stockpiles
  x New Alchemist AI
x Warn when stepping into enemy's FOV
x Auto-wait: don't wait while in combat
x Revamp messages for recieving/losing status
x Analyse mob and loot distribution and tweak weights
*** 3.0.0 release ***
x UI
  x Examine mode
    x refactoring
  x Basic mouse support
    x Right-click for examine/info
    x Tooltips for UI labels
      ~ Tooltips/explanations for individual messages?
    x Click on message pane for 'M' screen
    x Click on tabs in examine mode
    x Click on items/buttons in inventory mode
x Vaults rework
  x New marble room prefabs
  x Armory rooms
*** 3.1.0 release ***
x Workshop enhancements
  x Fabedit
  x Pressure plates and corridor lights
  x Construct garrisons in corridors
  x Alarm systems, improved alchemist AI
  x Additional prefabs for variety
- Lava and Water rework
  - Rework as terrain
  - Lava -> Glowing water
- Fix shrine-blowup particle effect (rework, simplify and speedup)
- Ring of deceleration
  - Workshop prefab
- "Quarantine"/"Holding" map
  - Tunneling + BSP mapgen
  - Items
    - Timekeeper's pendant
      - Ring of deceleration
    - Alternate earthen shield prefab (don't want to entirely remove shinies from Lab...)
  - Skeletal arbalists, corridor prefabs
  - Ember beast
  - Revgenunhelkim prisoners
- Crypt floor
  x Modify level data and spawn files
  - New monsters:
    - Vile protector
    - Hornblende statues
    - Schalenblende statues(?)
    - Pitchblende statues
    - Skeletal arbalists
  - Garrison inset prefabs
  - 1/Crypt/3 prefab(?)
  - Ability to gain MP/HP
  - Prefabs:
    - Paralysed+dormant arbalists/blademasters behind bars
    - Arbalists shooting at targets (DM observing)
    - Blademasters practicing formations (DM observing)
    - DM failing to resurrect dead revgen, cinder brute
  - Hall map at end
    - Win condition
- Add "character" to game
  - Names for all goblin/human monsters
  - Fluff prefabs
    - Washroom: zinc tiles surrounding water pool (zinc bathtub), sinks, bucket
    - Boiler room
    - Trophy room: cave-goblin armor, weapons, ...
    - Bathroom
    - Caverns: dustling workshop (paralyzed dustlings inside scanning machine)
    - Laboratory: alchemist bending over workbench, with barrels of glycerin,
      nitric acid, and sulfuric acid and a pile of potions of decimation
      nearby.
    - Laboratory: boxes/chunks of slade, with crushing/analyzing machines nearby.
- Lore prefabs
    - Laboratory: insane & paralysed prisoners inside holding cells
      - "Since the bastards won't tell us what these potions are for, we'll
        just have to find out ourselves."
    x Laboratory: Prisoners being blasted with transmitters on full power.
      - They are dazed if kept for many hours, but are otherwise unharmed.
      - Some have headaches (only in record, not an actual status).
    - Laboratory: insane & paralysed Revgenunkim inside holding cells
      - Poster explains that alchemists are experimenting with signal strength
        and repetition patterns to determine how to cause specific effects
      - Various other statuses: disoriented, debil, fear, enraged
    - Laboratory: insane & paralysed Revgenunkim (single) inside holding cell
      - Pump puts healing gas inside cell, while overclocked + high-powered
        transmitter damages Revgenunkim (only if >2 HP)
      - Poster explaining research.
    - Quarantine: dead Revgen, with cloud of miasma.
      - experiment had been carried out on Revgen with strange/modified
        transmitter that was found in a random tinkerer's room in Lab with no
        explanation/record. Revgen had woken up, violently vomited up acid and
        some of its internal organs, had a series of horrific seizures, and
        then died in agony a few hours later.
      - A few blademasters nearby (called in a panic when it woke up)
      - Alchemists drawing up record of incident
      - Some barrels/potions of sludge/acid.
    - Crypt + Marble room: Death mage trying (and failing) to resurrect Revgen.
- Simplification: instead of having attack AI for stalker, have them actually
  transform into sparklings when hunter captain dies
- Consider adding more ugrades
  - Hit% bonus, martial bonus (is that infringing on books too much?)
- Warn when next to spreading gas and resting
- Rework monster spells to be more positional in nature
  - Pain (range-limited AoE effect?)
  - Various resurrection spells (limited range?)
  - Paralysing zap (directional bolt only)
  - Fry (Cardinal directional bolt only)
- Unholy temple map + faction
  - Items
    - Ornate gold armor
  - Workshop/2 and Workshop/3
    - Additional fluff prefabs (see REXPaint sketch, rooms marked w/ '*')
    - Enh. Emberling
    - Enh. Emberling event
- Holy temple map + faction
  - Items
    - Ring of fustigation
    - Mark ring of concentration, condemnation as holy
    - Max HP increasing item(?) ("bread of life") (holy only, ofc) 
    - Inability to use holy items w/ evil ones equipped
      - Symbol is destroyed (since it's an item)
    - Dispel Undead
  - Angels spells
    - Hellfire spell (irresist damage)
    - Disintegration (punch through walls, same as ring)
    - Dispelling bolt (dispell undead, will-checked)
    - Rolling boulder
    - Martial, Spikes/riposte
    - Frozen fiend living ice ability (basalt themed, like basalt fiend)
    - Speeding bolt (more damage per distance)
  - Angel procgen
    - Initial generation
    - Name generation
    - Strength rating, tweaking
    - Simulation testing
  - Caverns rework
    - Alchemist + dustling analyzer prefabs
    - Dustling machines
- UI
  - Escape menu
    - List of visited/unvisited floors
  - Examine mode
    - Ability to view info on gas/terrain/wall/floor
    - Click on tile to move/attack/interact
- Basic speeches by mobs
- Rework gases
  x Remove usage of floats entirely
  - Quantize all gas dissipation rates into VSLOW, SLOW, MED, FAST, VFAST, etc
  - SIMD where possible
- Mob repositioning AI
  - AI to move out of dangerous tiles (gas/terrain)
  - AI to move out of reach of enemy, if mob has reaching weapon and is faster
  - AI to move onto advantageous terrain
- Scoring
- Scoresheet uploading (to where?)
- Basic save system, replaying of saves
- Vaults pt 2
  - Marble vaults: pure gold cloak prefab
  - Marble vaults: ornate gold armor prefab (rare, usually in unholy temple)
  - Marble vaults: tactic rooms, combat dummies, skeletal arbalists
  - Armory room: anti-night-creature variant
    - Potion of extermination
    - See glow potion buf item below
  - Dobalene rooms
- Rework -1/Prison to -1/Hub
  - Exiting staircase to "outside" on top
  - Doorway to Crypt on bottom side
  - Entry points and (unavailable) staircase to "0/Dining" in center
    - If player tries to go up w/ center staircase, staircase gets
      locked down, and guards start pouring out. i.e. challenge mode
      - Prevents Revgenunkim invasion event?
- Basalt monsters (-mages, -lings)?
  - Plus: ability that confers status on player that causes Living Stone to
    continually spawn around player
- Night Creatures, part two
  - Decreased rep for:
    - Killing NC
    - Throwing fire/illuminations potions at NC
  - Creeping Death
    - Inject venom spell
    - Dijkstra vision
    - Stalking enemy AI
  - Infestation abilities
    - Cherbs, actual spell
    - Winged terrors
    - Ring of Infestation
    - Exterminator specialists
  - Alignment map/mechanics
    - Map design + cloak of the night
    - NC dropping map/key
    - Props on map for effect
    - Animation (need particle engine[DONE])
  - Demolisher specialists
  - Additional spectral orb augments
    - (100) Augment [s]: Will-checked survival when against opposing blades
    - ( 50) Augment [d]: 10%/20% chance to die when no hostiles, instead of instantly.
    - ( 10) Augment [x]: Blades spawn immobile and explode (elec) on death.
    - ( 10) Augment [i]: Blades spawn immobile, but get +1 HP and 100% Melee.
    - (100) Augment [k]: Each blade gets +1 Spikes and -25% Melee.
    - (100) Augment [y]: Blade attacks cause insanity for 1 turn in vulnerable foes.
    - (100) Augment [f]: Blade attacks have minor chance to infest foe.
- Revgenuhelkim
  - Acid damage and resistance
    - 'slimy' status (knockback in direction of last move + rFire)
      - note for later: no rings, should be unique status
      - 1/10 chance of hitting wall when moving towards it (otherwise no hit)
      - barrels/pools of sludge
      - potion of slimification (rare) [recipe: disorient]
  - Revgenuhelkim
    - Acid claws
    - Digging abilities
  - Quicklime Brutes
    - Acid bolt spell
    - Acid bolt animation
  - Burning Brutes
    - Digging abilities
    - Reworked burnt offering spell(?)
    - Make multitile
      - Add ground triggers to multitile code
  - Cinder Brutes
    - Renaming
    - Unsure if any other changes needed
- Make illumination/glow potions useful for raiding lairs
  - Corona/glowing damages NC, causes fleeing if wounded
  - Increased rarity + novel prefab for 7/ and 8/
  - Special, rare NC-blasting items in Shrine/Temple/Workshop
- Change statue's FOV
- Living dungeon: execution sessions
- Living dungeon: spire cleanup
- Living dungeon: scheduled prisoner transport
*** Untriaged/obsolete ***
- Add bookshelves and book types
  - Maps
  - Books that grant an ability
  - Misc useless books
- Load colors from data file
- Armor coatings
  - Potion of absorption: +15% Potential, -1 Will
  - Potion of fortification: +1 Will, -25% Potential (found in holy place)
    - Incompat: absorption
  - Potion of anti-corrosion: +25% rAcid (found only in special prefab?)
    - Recipe: paralysation(?)
  - Potion of anti-combustion: +25% rFire
  - Multiple coating + incompatibilities
- Mapgen features
  - Guards in cubbyholes (both corridors and rooms)
    - Diagonal cubbyholes
  - "Siderooms"
    x PRI: prisons and cages
    - PRI and QRT: misc machinery (boilers, water pipes)
    x LAB: misc machinery, cages of constructs and animals
- Revgenunhelkim 1/Prison invasion event
  - Initial wave
  - Additional invasion waves
  - Initial counterattack
  - Further counterattack waves
  - Final counter attack with Archmagi
  - Possible Night Creature counterattack event
  - Possible Angel counterattack event
